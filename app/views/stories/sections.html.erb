
<style>
  .story-tree
  {width:100%;}
  .story-tree ul li ul
  {
    padding-left:10px;
    overflow:hidden;
  }
  .story-tree > ul > li.item.active > span
  {
      color: rgb(51, 51, 51);
      background-color: #f5f5f5;
     padding:7px;

  }
  .story-tree > ul > li.item 
  {     
      padding:7px;
      margin:7px;
      
  }
   .story-tree > ul > li.item > span 
  {
      font-size:13px;
      font-weight: bold;
         
    }

     .story-tree > ul > li.item > ul > li.sub
  {
      font-size:13px;
      border-bottom: 1px solid #999999;
      padding:5px;
    }
       .story-tree > ul > li.item > ul > li.sub:hover
      {
      color: rgb(51, 51, 51);
      background-color: #f5f5f5;
        }
    .story-tree ul > li > ul > li.active
  {
      color: rgb(51, 51, 51);
      background-color: #f5f5f5;
  }
   .story-tree a
  {
    text-decoration: none;

  }

  #toolbar div
  {
    float:left;
  } 
.clear { 
    clear:both; 
}

  #toolbar
  {
    clear:both;
    display:block;
  }
</style>

<div class='row'>
  <div class='span12'><h1>Story line</h1></div>
</div>
<div class='row'>
  <div class='span12'>
   <div id='toolbar' class='clear'>
      <div class="btn-group">
        <button type="button btn-small" id='btnAddSection' class="btn btn-primary btn-small"><i class="icon-align-justify icon-white"></i>&nbsp;<%= t('app.buttons.add_section') %></button>
        <button type="button" id='btnAddItem' class="btn btn-primary btn-small"><i class="icon-film icon-white"></i>&nbsp;<%= t('app.buttons.add_item') %></button>
        <button type="button" id='btnDelete' class="btn btn-small btn-danger" ><i class="icon-remove icon-white">
          
        </i>&nbsp;<%= t('app.buttons.delete') %></button>
        <button type="button" class="btn btn-info  btn-small"> <i class="icon-arrow-up icon-white"></i>&nbsp;<%= t('app.buttons.up') %> </button>
        <button type="button" class="btn btn-info  btn-small"> <i class="icon-arrow-down icon-white"></i>&nbsp;<%= t('app.buttons.down') %></button>
      </div>
    </div>
  </div>
</div>

<div class='row'>
  <div class='span3'>   
 
    <div class='story-tree' id='<%= @story.id %>'>        
      <ul>
          <% @story.sections.each do |item| %>          
              <li id='<%= item.id %>' data-type='<%= item.get_str_type %>' class='item'><span><%= item.title %></span>
                  
                  <% if item.content? && item.content.present? %>
                    <ul><li id='<%= item.content.id %>' class='sub'><span><%= item.content.title %></span></li></ul>
                  <% elsif item.media? && item.media.present? %>
                    <ul>
                        <span><% item.media.each do |subitem| %></span>                  
                        <li id='<%= subitem.id %>' class='sub'><%= subitem.title %></li>
                      <%end%>
                    </ul>
                  <%end%>
              </li>          
          <% end %>    
      </ul>  
    </div>    
  </div>  
  <div class='span9 story-viewer' id='storyViewer'></div>

</div>

<div id="modalVideo" class="reveal-modal" style='width:853px; height:480px'>   
    <div class='modal-data'>  
        <video preload="auto" width="853px" height="480px" controls>
          Your browser does not support this video.

        </video>
      </div>     
     <a class="close-reveal-modal">&#215;</a>
</div>
<div id="modalImage" class="reveal-modal">     
      <div class='modal-data'></div>
      <a class="close-reveal-modal">&#215;</a>
</div>